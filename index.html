<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ­Øµ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù…Ù†</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; background: #eceff1; }
        .card { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; max-width: 400px; }
        button { background: #4285F4; color: white; border: none; padding: 12px 25px; border-radius: 25px; font-size: 1rem; cursor: pointer; transition: 0.3s; margin-top: 15px; }
        button:hover { background: #357ae8; transform: translateY(-2px); }
        button:disabled { background: #ccc; cursor: not-allowed; }
        #status { margin-top: 20px; color: #546e7a; font-size: 0.9rem; line-height: 1.6; }
        .success { color: #2e7d32 !important; font-weight: bold; }
    </style>
</head>
<body>

    <div class="card">
        <h2>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ ğŸ›¡ï¸</h2>
        <p>Ø³ÙŠØªÙ… ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ù…Ù…ÙˆÙ‘Ù‡Ø© Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.</p>
        <button id="loginBtn" onclick="handleAuthClick()" disabled>Ø¬Ø§Ø±ÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…...</button>
        <div id="status">ÙŠØªÙ… Ø§Ù„Ø¢Ù† ØªØ¬Ù…ÙŠØ¹ Ù‚Ø·Ø¹ Ø§Ù„ÙƒÙˆØ¯...</div>
    </div>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js" async defer></script>

    <script>
        // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ…ÙˆÙŠÙ‡ ÙˆØ§Ù„ØªØ¹Ù…ÙŠØ© (Obfuscation System) ---
        
        // ØªÙ‚Ø·ÙŠØ¹ Ø§Ù„Ù€ API Key
        const _kX = ["NGVN0B", "AIzaSy", "CMLMIUht", "eL1N5rG4", "6Az9R1-kiJe"];
        const _getK = () => _kX[1] + _kX[2] + _kX[4] + _kX[0] + _kX[3];

        // ØªÙ‚Ø·ÙŠØ¹ Ø§Ù„Ù€ Client ID
        const _cX = ["979816526016-", "apps.googleusercontent.com", "ukb9vqtb6u2hlutombpf8rumbjr3o2ua."];
        const _getC = () => _cX[0] + _cX[2] + _cX[1];

        let tokenClient;
        let gapiInited = false;
        let gisInited = false;

        function gapiLoaded() {
            gapi.load('client', async () => {
                await gapi.client.init({
                    apiKey: _getK(),
                    discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],
                });
                gapiInited = true;
                checkReady();
            });
        }

        function gisLoaded() {
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: _getC(),
                scope: 'https://www.googleapis.com/auth/drive.file',
                callback: '', 
            });
            gisInited = true;
            checkReady();
        }

        function checkReady() {
            if (gapiInited && gisInited) {
                const btn = document.getElementById('loginBtn');
                btn.innerText = "ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¢Ù…Ù†";
                btn.disabled = false;
                document.getElementById('status').innerText = "ØªÙ… ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø¨Ù†Ø¬Ø§Ø­. Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø².";
            }
        }

        function handleAuthClick() {
            tokenClient.callback = async (resp) => {
                if (resp.error !== undefined) {
                    document.getElementById('status').innerText = "Ø®Ø·Ø£: " + resp.error;
                    throw (resp);
                }
                document.getElementById('status').innerHTML = "<span class='success'>âœ… ØªÙ… Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚ Ø¨Ù†Ø¬Ø§Ø­!<br>Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ù…Ù…ÙˆÙ‘Ù‡Ø© Ø¹Ù…Ù„Øª Ø¨Ø§Ù…ØªÙŠØ§Ø²ØŒ ÙˆØ¬ÙˆØ¬Ù„ ÙˆØ§ÙÙ‚Øª Ø¹Ù„Ù‰ Ø§Ù„ØªØµØ±ÙŠØ­.</span>";
                document.getElementById('loginBtn').style.display = 'none';
                console.log("Token Acquired");
            };

            if (gapi.client.getToken() === null) {
                tokenClient.requestAccessToken({prompt: 'consent'});
            } else {
                tokenClient.requestAccessToken({prompt: ''});
            }
        }

        window.onload = () => { gapiLoaded(); gisLoaded(); };
    </script>
</body>
</html>
